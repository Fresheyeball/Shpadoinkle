= Console

Support for logging to the JavaScript console, via three classes.

[source,haskell]
----
class LogJS (c :: Type -> Constraint) where
  logJS :: c a => a -> JSM ()

class LogJS c => Trapper c where
  trapper :: c a => JSContextRef -> a -> a

class Assert (c :: Type -> Constraint) where
  assert :: c a => Bool -> a -> JSM ()
----

These provide a `TypeApplications` interface for logging to the JavaScript console. Different log levels, time measurement, and other features of the native console are supported.

== Trapping

Trapping lets us log all state changes to our application for debugging purposes. For example you can log the state as it enters the `view` function thusly:

[source,haskell]
----
main :: IO ()
main = runJSorWarp 8080 $ do
  ctx <- askJSM
  simple runParDiff initial (view . trapper @ToJSON ctx) getBody
----

This will log all state by first encoding to JSON with Aeson, then then logging with `JSON.parse` so the browser console has the nice native display. If we change it to `trapper @Show ctx` it will use the `Show` instance instead.
